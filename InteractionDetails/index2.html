<!DOCTYPE html>
<html>
    <head>
        <title>Collaborate Toast Demo</title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script src="https://sdk-cdn.mypurecloud.com/client-apps/2.6.3/purecloud-client-app-sdk-de77761d.min.js"></script>
        
       
    </head>

    <body>
        
        

        <script>$(function () {
                let myClientApp = null;

                // Note: This manual check for query string is for backwards compatibility of this
                // deployed example.  In your own apps, you can assume the query param will be
                // provided by Genesys Cloud if you have configured it in your app's config.
                console.log('Starting OK')
                const envQueryParamName = 'pcEnvironment';
                const hostQueryParamName = 'gcHostOrigin';
                const targetEnvQueryParamName = 'gcTargetEnv';
                const locationSearch = (window && window.location && typeof window.location.search === 'string') ? window.location.search : '';
                const queryParams = new URLSearchParams(locationSearch);
                if (queryParams.get(hostQueryParamName) || queryParams.get(targetEnvQueryParamName)) {
                    // Compute Genesys Cloud region from host origin
                    myClientApp = new window.purecloud.apps.ClientApp({
                        gcHostOriginQueryParam: hostQueryParamName,
                        gcTargetEnvQueryParam: targetEnvQueryParamName
                    });
                    console.log('Settings OK')
                    const onFocus = async evt => { await alert("onFocus") }
                    const onBlur = async evt => { await alert("onBlur") }
                     myclientApp.lifecycle.addBlurListener(onBlur);
                    myclientApp.lifecycle.addFocusListener(onFocus);
                } else if (queryParams.get(envQueryParamName)) {
                    // Compute Genesys Cloud region from pcEnvironment
                    myClientApp = new window.purecloud.apps.ClientApp({ pcEnvironmentQueryParam: envQueryParamName });
                } else {
                    // Use default Genesys Cloud region
                    myClientApp = new window.purecloud.apps.ClientApp();
                }
              
                
      
            })
        </script>
    </body>
</html>