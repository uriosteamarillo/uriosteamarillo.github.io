<!doctype html>
<html lang="en">
<!--Create by matt as an example only
    connects to the Genesys Cloud WebMessaging API
    https://developer.genesys.cloud/api/digital/webmessaging/websocketapi
    -->

<head>
    <!-- Required meta tags -->
    <meta name="robots" content="noindex" />
    <!--Removes Google Crawler from indexing page-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./webMessagingAPI.js" defer></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>webMessagingAPI</title>
</head>

<body>
   
    <button type="button" class="m-3 btn btn-primary" onclick="clearToken()">Clear session token</button>
    <div style="display: flex;">
        <p class="m-3">Current token:</p>
        <p class="m-3" id="currentToken"></p>
    </div>
    <div style="display: flex;">
        <p class="m-3">Region:</p>
        <p class="m-3" id="region"></p>
    </div>
    <div style="display: flex;">
        <p class="m-3">Deployment:</p>
        <p class="m-3" id="deploymentId"></p>
    </div>

    <!--Emoji Picker-->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 12">
        <div id="emojis" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header justify-content-end" style="color: black;">Emoji Picker
                <button type="button" onclick="closeEmojis()" class="btn-close" data-bs-dismiss="toast"
                    aria-label="Close"></button>
            </div>
            <div class="toast-body">
                <div class="btn-group" style="flex-wrap: wrap;" role="group" aria-label="First group">
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜€</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜†</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜‚</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜‰</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜Š</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜‹</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜£</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜¯</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜«</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜´</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜Œ</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜œ</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜¢</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜­</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜¨</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜°</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜±</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜ </button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜•</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ™</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜®</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜¦</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜§</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜‘</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜¶</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜’</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜¬</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜³</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜“</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜…</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜‡</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜”</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜ª</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ¥³</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ˜·</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ‘</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ‘</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ‘Š</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ‘‹</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ‘</button>
                    <button type="button" class="btn btn-outline-secondary"
                        onclick="document.getElementById('message').value = document.getElementById('message').value + this.innerHTML">ğŸ‘Œ</button>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!--floating chat button-->
    <div class="position-fixed bottom-0 end-0 p-5" style="max-width: 150px">
        <div id="chatButton" class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
            <button type="button" class="btn btn-primary" style="width: 100%" onclick="openChat()">
                <img src="./docs/images/chatIcon.svg">
            </button>
        </div>
    </div>

    <!--floating chat widget-->
    <div class="position-fixed bottom-0 end-0 p-4" style="z-index: 11">
        <div id="widget" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <img class="w-25 p-3" src="./docs/images/chatIcon.svg">
                <h3 class="me-auto" style="color: black;">Web Messaging</h3>
                <button type="button" class="m-2 btn btn-light btn-sm" onclick="closeChat()">
                    <img src="./docs/images/close.svg">
                </button>
            </div>
            <div class="progress" style="height: 3px;">
                <div class="progress-bar progress-bar-striped progress-bar-animated" id="progressbar" role="progressbar"
                    aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
            </div>
          
            <div class="toast-body">
                <div id="messages" class="container overflow-auto position-relative" style="max-height: 40vh; min-height: 40vh"></div>
                <div class="mt-2 pt-2 border-top">
                    <div class="row">
                        <div class="col">
                            <input id="firstname" class="form-control" placeholder="First Name" aria-label="First Name" oninput="checkInputs()">
                        </div>
                        <div class="col">
                            <input id="lastname" class="form-control" placeholder="Last Name" aria-label="Last Name" oninput="checkInputs()">
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col">
                            <input id="message" class="form-control" placeholder="Enter message..." aria-label="message" oninput="checkInputs()">
                        </div>
                        <div class="col-auto">
                            <button type="button" class="btn btn-light btn-sm" id="emojiButton" onclick="openEmojis()">
                                <img src="./docs/images/emoji.svg">
                            </button>
                        </div>
                        <div class="col-auto">
                            <label type="button" class="btn btn-secondary btn-sm position-relative" style="width: 55px">
                                <img class="position-absolute top-50 start-50 translate-middle" src="./docs/images/image.svg">
                                <input class="form-control form-control-sm form-file-button-color-blue" id="formFileSm" type="file" onchange="fileStatus()" hidden>
                            </label>
                        </div>
                        <div class="col-auto">
                            <button type="button" class="btn btn-success btn-sm" id="sendButton" onclick="sendMessage()" disabled>
                                <img src="./docs/images/send.svg">
                            </button>
                        </div>
                    </div>
                </div>
                <div id="imageAttached" hidden>
                    <label id="imageAttachedName" class="m-1"></label>
                    <button type="button" class="m-1 btn-close" aria-label="Close" onclick="fileRemove()"></button>
                </div>
            </div>
            
            <script>
                function checkInputs() {
                    var firstname = document.getElementById('firstname').value;
                    var lastname = document.getElementById('lastname').value;
                    var message = document.getElementById('message').value;
                    var sendButton = document.getElementById('sendButton');
            
                    if (firstname.trim() !== '' && lastname.trim() !== '' && message.trim() !== '') {
                        sendButton.disabled = false;
                    } else {
                        sendButton.disabled = true;
                    }
                }
            
                function sendMessage() {
                    var firstname = document.getElementById('firstname').value;
                    var lastname = document.getElementById('lastname').value;
                    var message = document.getElementById('message').value;
                    var inputContainer = document.getElementById('inputContainer');
            
                    // Perform the sending of the message
                    // ...
            
                    // Hide the input fields after sending the message
                    inputContainer.style.display = 'none';
                }
            </script>
            
        </div>
    </div>
</body>

</html>
