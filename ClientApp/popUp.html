<!DOCTYPE html>
<html>
<head>
  <title>Popup Launcher</title>
  <script>
    window.onload = function () {
      const params = new URLSearchParams(window.location.search);
      const target = 'http://es1scrpgen01v:3001/?action=signin&username=agent&password=Agent2019!&agentId=TVLGO2&id=aabbCCDD123&agentName=TVLGO2&scriptType=Interaction&showConcierge=false&reRoute=true&SERVICE=Upsell_NBA&env=training&PhoneNumber=96789309&ins_no=750010&INTERACTION_DIRECTION=I&type=VOICE#!/sessions/6842d338de1ef2f443e34ef5/scripts/687e4a4927571f44bec3f719/run' 
//params.get("target");

      if (target) {
        const popup = window.open(target, "_blank", "width=800,height=600");

        if (!popup) {
          alert("Popup was blocked. Please allow popups for this site.");
        }
      } else {
        document.body.innerHTML = "<p style='color: red;'>No target URL provided. Use ?target=https://example.com</p>";
      }
    };


     // ðŸŸ¥ Este evento se ejecuta cuando la ventana madre se cierra o recarga
    window.onunload = () => {
      if (popup && !popup.closed) {
        popup.close(); // ðŸ”¥ Cierra la ventana hija cuando la madre muere
      }
    };
  </script>
</head>
<body>
  <p>Opening popup...</p>
</body>
</html>
