<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Skill Contacts Dashboard</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  table { border-collapse: collapse; width: 100%; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
  th { background-color: #f4f4f4; }
  h2 { text-align: center; }
  .blocked { color: red; text-align: center; font-size: 1.2em; margin-top: 50px; }
</style>
</head>
<body>

<h2>Skill Contacts Dashboard</h2>

<table id="skillsTable">
  <thead>
    <tr>
      <th>Skill</th>
      <th>Total Contacts</th>
      <th>Contacts Called</th>
      <th>Contacts Left to Call</th>
    </tr>
  </thead>
  <tbody>
    <!-- Filas se generan dinámicamente -->
  </tbody>
</table>

<script>
  // ===== Bloqueo de iframe según origen =====
  const allowedOrigin = "https://apps.mypurecloud.ie";

  if (!document.referrer.startsWith(allowedOrigin)) {
    document.body.innerHTML = '<div class="blocked">Access denied: this page can only be embedded in apps.mypurecloud.ie</div>';
    throw new Error("Not allowed to embed");
  }

  // ===== Datos de ejemplo (Skills) =====
  const skillData = [
    { skill: "Sales", total: 120, called: 50, left: 70 },
    { skill: "Support", total: 80, called: 30, left: 50 },
    { skill: "Marketing", total: 200, called: 150, left: 50 }
  ];

  // ===== Generar tabla dinámicamente =====
  const tbody = document.querySelector('#skillsTable tbody');
  skillData.forEach(item => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${item.skill}</td>
      <td>${item.total}</td>
      <td>${item.called}</td>
      <td>${item.left}</td>
    `;
    tbody.appendChild(tr);
  });
</script>

</body>
</html>
